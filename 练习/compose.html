<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>compose函数</title>
</head>
<body>
    <script>
        function compose() {
            var fns = [].slice.call(arguments)
            return function (initialArg) {
                var res = initialArg
                for (var i = fns.length - 1; i > -1; i--) {
                    res = fns[i](res)
                }
                return res
            }
        }

        function pipe() {
            var fns = [].slice.call(arguments)
            return function (initialAgr) {
                var res = initialAgr
                for (var i = 0; i < fns.length; i++) {
                    res = fns[i](res)
                }
                return res
            }
        }

        //头部加 hi：
        var greet = function (name) { return 'hi:' + name }

        //尾部加！
        var exclaim = function (statement) { return statement.toUpperCase() + '!' }

        //h或H变a
        var transform = function (str) { return str.replace(/[hH]/, 'a') }

        var welcome1 = compose(greet, exclaim, transform)
        var welcome2 = pipe(greet, exclaim, transform)
        console.log(welcome1('dot'))//hi:DOT!
        console.log(welcome2('dot'))//aI:DOT!
    </script>

    <pre>
        function compose() {
            var fns = [].slice.call(arguments)
            return function (initialArg) {
                var res = initialArg
                for (var i = fns.length - 1; i > -1; i--) {
                    res = fns[i](res)
                }
                return res
            }
        }

        function pipe() {
            var fns = [].slice.call(arguments)
            return function (initialAgr) {
                var res = initialAgr
                for (var i = 0; i < fns.length; i++) {
                    res = fns[i](res)
                }
                return res
            }
        }

        //头部加 hi：
        var greet = function (name) { return 'hi:' + name }

        //尾部加！
        var exclaim = function (statement) { return statement.toUpperCase() + '!' }
        
        //h或H变a
        var transform = function (str) { return str.replace(/[hH]/, 'a') }

        var welcome1 = compose(greet, exclaim, transform)
        var welcome2 = pipe(greet, exclaim, transform)
        console.log(welcome1('dot'))//hi:DOT!
        console.log(welcome2('dot'))//aI:DOT!
    </pre>


    
</body>
</html>